<!DOCTYPE html>
<html lang="en" dir="ltr"><head>
  
                           
     


<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.118.2">
<title>Mietspiegel erstellen mit immobilienscout24 | Philipp Leppert</title>








  
    
  
<meta name="description" content="My homepage">


<meta property="og:site_name" content="Philipp Leppert">
<meta property="og:title" content="Mietspiegel erstellen mit immobilienscout24 | Philipp Leppert">
<meta property="og:description" content="My homepage" />
<meta property="og:type" content="page" />
<meta property="og:url" content="https://philippleppert.eu/blog/mietspiegel-immoscout/" />
<meta property="og:locale" content="en">




    
        <meta property="og:image" content="https://philippleppert.eu/blog/mietspiegel-immoscout/featured.png" >
        <meta property="twitter:card" content="summary_large_image">
        <meta name="twitter:image" content="https://philippleppert.eu/blog/mietspiegel-immoscout/featured.png" >
    
    
  <meta itemprop="name" content="Mietspiegel erstellen mit immobilienscout24">
<meta itemprop="description" content="Kann man mit extrahierten Daten von Immobilienscout-24 eine Übersicht über die Angebotsmieten einer Stadt erstellen?"><meta itemprop="datePublished" content="2017-06-19T00:00:00+00:00" />
<meta itemprop="dateModified" content="2017-06-19T00:00:00+00:00" />
<meta itemprop="wordCount" content="1639"><meta itemprop="image" content="https://philippleppert.eu/blog/mietspiegel-immoscout/featured.png">
<meta itemprop="keywords" content="" />
  
  
  <!--[if IE]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <link rel="shortcut icon" href="/img/icon.png" type="image/x-icon">
  <link rel="icon" href="/img/icon.png" type="image/x-icon">
  
  
  <link rel="stylesheet" href="/style.main.min.6ff702015d6c26370cdcf973dec600ef738de63c1cff17a62b86c7f885c08541.css" integrity="sha256-b/cCAV1sJjcM3Plz3sYA73ON5jwc/xemK4bH&#43;IXAhUE=" media="screen">
  
  
  <script src="/panelset.min.ed1ac24b6e16f4e2481e3d1d098ae66f5bc77438aef619e6e266d8ac5b00dc72.js" type="text/javascript"></script>
  
  
  <script src="/main.min.b2cad19798d2e5451244dfcd623848782a1de625dac7e4d6d6e5cb542c993994.js" type="text/javascript"></script>
</head>
<body>
      <div class="grid-container">
<header class="site-header pt4 pb2 mb4 bb b--transparent ph5 headroom z-max" role="banner">
  <nav class="site-nav db dt-l w-100" role="navigation">
    <a class="site-brand db dtc-l v-mid link no-underline w-100 w-33-l tc tl-l" href="https://philippleppert.eu/" title="Home">
      <span class="f4 fw7">Philipp Leppert</span>
    </a>
    <div class="site-links db dtc-l v-mid w-100 w-47-l tc tr-l mt3 mt0-l ttu tracked">
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/about/" title="About me">About</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 active" href="/blog/" title="Read my blog">Blog</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/music/" title="Listen to my music">Music</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/tutorials/" title="Browse my tutorials">Tutorials</a>
      
      
    </div>
  </nav>
</header>

<main class="page-main pa4" role="main">
  <section class="page-content mw7 center">
    <article class="post-content pa0 ph4-l">
      <header class="post-header">
        <h1 class="f1 lh-solid measure-narrow mb3 fw4">Mietspiegel erstellen mit immobilienscout24</h1>
        
        <p class="f6 measure lh-copy mv1">By Philipp Leppert in <a href="https://philippleppert.eu/categories/r">R</a>  <a href="https://philippleppert.eu/categories/kartierung">Kartierung</a>  <a href="https://philippleppert.eu/categories/webscraping">Webscraping</a> </p>
        <p class="f7 db mv0 ttu">June 19, 2017</p>

      

      </header>
      <section class="post-body pt5 pb4">
        <script src="index_files/libs/kePrint-0.0.1/kePrint.js"></script>
<p>Angebotsmieten spiegeln die gegenwärtige Mietpreissituation auf dem Wohnungsmarkt wider und können, je nach Region, von den Bestandsmieten deutlich abweichen. Befindet man sich gerade auf der Suche nach einer Wohnung, wird man schnell ein Gefühl dafür bekommen, in welchem Stadtteil Wohnraum teuer oder günstig zu haben ist. Bereits vor der Wohnungssuche kann man sich über die Mietsituation in einer Stadt oder Region mit öffentlich zugänglichen Informationen wie dem <a href="https://www.bbsr.bund.de/SiteGlobals/Forms/Suche/VeroeffentlichungsSuche_Formular.html?nn=2547954" target="_blank">Immobilienmarktbericht</a> auseinandersetzen, welcher vom Bundesinstitut für Bau-, Stadt- und Raumforschung erstellt wird. Auch Unternehmen wie die 
<a href="https://www.immodaten.net/" target="_blank" rel="noopener">IdN Immodaten GmbH</a> bieten ein umfangreiches Datenangebot zum Immobilienmarkt an und werten dabei <em>26 Quellen auf Inserate von Tageszeitungen und Online-Börsen nach ihren einzelnen Bestandteilen aus</em> (Stand Juni 2017), wobei hier die Nutzung kostenpflichtig ist.</p>
<p>Mit statistischer Software und dem Internet kann man sich auch selbst ein Bild der aktuellen Mietpreise verschaffen! Benötigt wird dazu RStudio, ein Internetbrowser und eine Webseite mit Wohnungsinseraten wie bspw. 
<a href="https://www.immobilienscout24.de/" target="_blank" rel="noopener">immobilienscout24</a>. Mit dem 
<a href="http://selectorgadget.com" target="_blank" rel="noopener">CSS Selector Gadget</a> - ein Point-and-Click-Tool zum Identifizieren von sog. <em>HTML-Nodes</em> - und dem R-Paket <code>rvest</code> können Inhalte von Webseiten extrahiert und verarbeitet werden.</p>
<p><em>Hinweis</em>: Da die Struktur einer Webseite im Zeitverlauf selten statisch ist, kann die fehlerfreie Funktion des Codes nur durch kontinuierliche Pflege gewährleistet werden. Außerdem kann der Betreiber der Webseite das (automatisierte) Extrahieren von Inhalten ausschließen. Nähere Informationen dazu findet man gewöhnlich in der Datei <em>robots.txt</em> der jeweiligen Webseite.</p>




<h2 id="datenbeschaffung"><strong>Datenbeschaffung</strong>
  <a href="#datenbeschaffung"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h2>
<p>Die Webseite immobilienscout24 bietet eine Suchleiste, mit welcher bspw. innerhalb einer Stadt oder einer Postleitzahl Wohnungsinserate gefunden werden können. Auf einer Ergebnisseite befinden sich dann mehrere Inserate mit den wichtigsten Informationen zur Wohnung (Preis, Größe, &hellip;). Um eine Seite der Suchergebnisse anzusteuern, muss zunächst die <code>stadt</code> und das zugehörige <code>bundesland</code> definiert werden. Weiterhin ist es ratsam die Seitenanzahl der Suchergebnisse zu prüfen und festzulegen, damit das Extrahieren der Inserate nicht ins Leere läuft.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span>stadt <span style="color:#666">&lt;-</span> <span style="color:#4070a0">&#34;Wiesbaden&#34;</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>bundesland <span style="color:#666">&lt;-</span> <span style="color:#4070a0">&#34;Hessen&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>seiten <span style="color:#666">&lt;-</span> <span style="color:#40a070">20</span> 
</span></span></code></pre></div><p>Als Nächstes werden die für die Suche relevanten URLs aus den vorherigen Eingaben generiert. Auch legt man Objekte fest, in denen die extrahierten Inhalte gespeichert werden sollen. Der gesamte Inhalt einer Seite der Suchergebnisse wird in der Liste <code>seite</code> gespeichert. Ich möchte später aus den Anzeigen Informationen über <code>titel</code>, <code>lage</code>, <code>miete</code> und <code>groesse</code> der Wohnung gewinnen und lege für jedes Merkmal eine leere Liste an.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic"># URL Vektor</span>
</span></span><span style="display:flex;"><span>url <span style="color:#666">&lt;-</span> <span style="color:#06287e">rep</span>(<span style="color:#40a070">0</span>, seiten)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic"># Stamm Adresse</span>
</span></span><span style="display:flex;"><span>stamm <span style="color:#666">&lt;-</span> <span style="color:#4070a0">&#34;https://www.immobilienscout24.de/&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic"># Suchergebnisse Seite 1</span>
</span></span><span style="display:flex;"><span>url[1] <span style="color:#666">&lt;-</span> <span style="color:#06287e">paste0</span>(stamm,<span style="color:#4070a0">&#34;Suche/S-2/Wohnung-Miete/&#34;</span>, bundesland, <span style="color:#4070a0">&#34;/&#34;</span>,stadt) 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic"># Suchergebnisse Seite 2 bis Seite 20</span>
</span></span><span style="display:flex;"><span><span style="color:#06287e">for </span>(x in <span style="color:#40a070">2</span><span style="color:#666">:</span>seiten){
</span></span><span style="display:flex;"><span>  url[x] <span style="color:#666">&lt;-</span> <span style="color:#06287e">paste0</span>(stamm,<span style="color:#4070a0">&#34;Suche/S-2/P-&#34;</span>, x, <span style="color:#4070a0">&#34;/Wohnung-Miete/&#34;</span>, bundesland, <span style="color:#4070a0">&#34;/&#34;</span>,stadt)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic"># URL-Inhalt extrahieren und in Liste speichern </span>
</span></span><span style="display:flex;"><span>seite <span style="color:#666">&lt;-</span> <span style="color:#06287e">list</span>()
</span></span><span style="display:flex;"><span><span style="color:#06287e">for </span>(j in <span style="color:#40a070">1</span><span style="color:#666">:</span>seiten){
</span></span><span style="display:flex;"><span>  seite[[j]] <span style="color:#666">&lt;-</span> xml2<span style="color:#666">::</span><span style="color:#06287e">read_html</span>(url[j])
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic"># Zu extrahierende Merkmale festlegen</span>
</span></span><span style="display:flex;"><span>titel <span style="color:#666">&lt;-</span> <span style="color:#06287e">list</span>()
</span></span><span style="display:flex;"><span>lage <span style="color:#666">&lt;-</span> <span style="color:#06287e">list</span>()
</span></span><span style="display:flex;"><span>miete <span style="color:#666">&lt;-</span> <span style="color:#06287e">list</span>()
</span></span><span style="display:flex;"><span>groesse <span style="color:#666">&lt;-</span> <span style="color:#06287e">list</span>()
</span></span></code></pre></div><p>Nun folgt eine Schleife, welche pro Durchlauf eine Seite der Suchergebnisse extrahiert. Ich habe vorher mit dem CSS Selector Gadget alle relevanten <em>HTML-Nodes</em> identifiziert, die ich nun gezielt ansteuere. Bspw. versteckt sich hinter der <em>Node</em> <code>.data-ng-non-bindable</code> der Titel des Wohnungsinserates.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#06287e">for </span>(i in <span style="color:#40a070">1</span><span style="color:#666">:</span>seiten) {
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#60a0b0;font-style:italic"># Titel des Inserats</span>
</span></span><span style="display:flex;"><span>  titel[[i]] <span style="color:#666">&lt;-</span> seite[[i]] <span style="color:#666">%&gt;%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#06287e">html_nodes</span>(<span style="color:#4070a0">&#34;.data-ng-non-bindable&#34;</span>) <span style="color:#666">%&gt;%</span>
</span></span><span style="display:flex;"><span>  <span style="color:#06287e">html_text</span>()
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  titel[[i]] <span style="color:#666">&lt;-</span> <span style="color:#06287e">gsub</span>(<span style="color:#4070a0">&#34;NEU&#34;</span>,<span style="color:#4070a0">&#34;&#34;</span>, titel[[i]])
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#60a0b0;font-style:italic"># Adresse</span>
</span></span><span style="display:flex;"><span>  lage[[i]] <span style="color:#666">&lt;-</span> seite[[i]] <span style="color:#666">%&gt;%</span>
</span></span><span style="display:flex;"><span>    <span style="color:#06287e">html_nodes</span>(<span style="color:#4070a0">&#34;.link-underline&#34;</span>) <span style="color:#666">%&gt;%</span>
</span></span><span style="display:flex;"><span>    <span style="color:#06287e">html_text</span>()
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  lage[[i]] <span style="color:#666">&lt;-</span> <span style="color:#06287e">gsub</span>(<span style="color:#4070a0">&#34;\n&#34;</span>,<span style="color:#4070a0">&#34;&#34;</span>, lage[[i]])
</span></span><span style="display:flex;"><span>  lage[[i]] <span style="color:#666">&lt;-</span> <span style="color:#06287e">trimws</span>(lage[[i]])
</span></span><span style="display:flex;"><span>  lage[[i]] <span style="color:#666">&lt;-</span> lage[[i]][<span style="color:#666">-</span><span style="color:#06287e">c</span>(<span style="color:#40a070">1</span>,<span style="color:#40a070">2</span>,<span style="color:#40a070">3</span>)]
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#60a0b0;font-style:italic"># Kaltmiete</span>
</span></span><span style="display:flex;"><span>  miete[[i]] <span style="color:#666">&lt;-</span> seite[[i]] <span style="color:#666">%&gt;%</span>
</span></span><span style="display:flex;"><span>    <span style="color:#06287e">html_nodes</span>(<span style="color:#4070a0">&#34;.result-list-entry__primary-criterion:nth-child(1) .font-line-xs&#34;</span>) <span style="color:#666">%&gt;%</span>
</span></span><span style="display:flex;"><span>    <span style="color:#06287e">html_text</span>() <span style="color:#666">%&gt;%</span>
</span></span><span style="display:flex;"><span>    <span style="color:#06287e">strtrim</span>(<span style="color:#40a070">100</span>)
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  miete[[i]] <span style="color:#666">&lt;-</span> <span style="color:#06287e">gsub</span>(<span style="color:#4070a0">&#34;\n&#34;</span>,<span style="color:#4070a0">&#34;&#34;</span>, miete[[i]])
</span></span><span style="display:flex;"><span>  miete[[i]] <span style="color:#666">&lt;-</span> <span style="color:#06287e">trimws</span>(miete[[i]])
</span></span><span style="display:flex;"><span>  miete[[i]] <span style="color:#666">&lt;-</span> <span style="color:#06287e">gsub</span>(<span style="color:#4070a0">&#34;€&#34;</span>,<span style="color:#4070a0">&#34;&#34;</span>, miete[[i]])
</span></span><span style="display:flex;"><span>  miete[[i]] <span style="color:#666">&lt;-</span> <span style="color:#06287e">gsub</span>(<span style="color:#4070a0">&#34;\\.&#34;</span>,<span style="color:#4070a0">&#34;&#34;</span>, miete[[i]])
</span></span><span style="display:flex;"><span>  miete[[i]] <span style="color:#666">&lt;-</span> <span style="color:#06287e">gsub</span>(<span style="color:#4070a0">&#34;\\,&#34;</span>,<span style="color:#4070a0">&#34;.&#34;</span>, miete[[i]])
</span></span><span style="display:flex;"><span>  miete[[i]] <span style="color:#666">&lt;-</span> <span style="color:#06287e">as.numeric</span>(miete[[i]])
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#60a0b0;font-style:italic"># Groesse</span>
</span></span><span style="display:flex;"><span>  groesse[[i]] <span style="color:#666">&lt;-</span> seite[[i]] <span style="color:#666">%&gt;%</span>
</span></span><span style="display:flex;"><span>    <span style="color:#06287e">html_nodes</span>(<span style="color:#4070a0">&#34;.result-list-entry__primary-criterion:nth-child(2) .font-line-xs&#34;</span>) <span style="color:#666">%&gt;%</span>
</span></span><span style="display:flex;"><span>    <span style="color:#06287e">html_text</span>() <span style="color:#666">%&gt;%</span>
</span></span><span style="display:flex;"><span>    <span style="color:#06287e">strtrim</span>(<span style="color:#40a070">100</span>)
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  groesse[[i]] <span style="color:#666">&lt;-</span> <span style="color:#06287e">gsub</span>(<span style="color:#4070a0">&#34;\n&#34;</span>,<span style="color:#4070a0">&#34; &#34;</span>, groesse[[i]])
</span></span><span style="display:flex;"><span>  groesse[[i]] <span style="color:#666">&lt;-</span> <span style="color:#06287e">trimws</span>(groesse[[i]])
</span></span><span style="display:flex;"><span>  groesse[[i]] <span style="color:#666">&lt;-</span> <span style="color:#06287e">gsub</span>(<span style="color:#4070a0">&#34;([0-9]+).*&#34;</span>,<span style="color:#4070a0">&#34;\\1&#34;</span>,groesse[[i]])
</span></span><span style="display:flex;"><span>  groesse[[i]] <span style="color:#666">&lt;-</span> <span style="color:#06287e">as.numeric</span>(groesse[[i]])
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>



<h2 id="datenaufbereitung"><strong>Datenaufbereitung</strong>
  <a href="#datenaufbereitung"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h2>
<p>Die Listen werden nun in Vektoren umgewandelt und dann in einem <em>Data Frame</em> zusammengefasst. Aus den Merkmalen <code>groesse</code> und <code>miete</code> bilde ich den Quotienten <code>preis_qm</code> und entferne, sofern vorhanden, fehlende Angaben. Anschließend erstelle ich das Merkmal <code>price_cat</code>, welches für jedes Inserat eine Preiskategorie angibt.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic"># Listen in Vektoren umwandeln</span>
</span></span><span style="display:flex;"><span>titel <span style="color:#666">&lt;-</span><span style="color:#06287e">unlist</span>(titel)
</span></span><span style="display:flex;"><span>lage <span style="color:#666">&lt;-</span> <span style="color:#06287e">unlist</span>(lage)
</span></span><span style="display:flex;"><span>miete <span style="color:#666">&lt;-</span> <span style="color:#06287e">unlist</span>(miete)
</span></span><span style="display:flex;"><span>groesse <span style="color:#666">&lt;-</span> <span style="color:#06287e">unlist</span>(groesse)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic"># Neues Merkmal</span>
</span></span><span style="display:flex;"><span>preis_qm <span style="color:#666">&lt;-</span> miete<span style="color:#666">/</span>groesse
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic"># Data Frame erstellen</span>
</span></span><span style="display:flex;"><span>daten <span style="color:#666">&lt;-</span> <span style="color:#06287e">data.frame</span>(titel, lage, miete, groesse, preis_qm)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic"># Fehlende Werte entfernen</span>
</span></span><span style="display:flex;"><span>daten <span style="color:#666">&lt;-</span> <span style="color:#06287e">subset</span>(daten, (<span style="color:#666">!</span><span style="color:#06287e">is.na</span>(daten<span style="color:#666">$</span>preis_qm)))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic"># Preiskategorie</span>
</span></span><span style="display:flex;"><span>daten<span style="color:#666">$</span>pricecat[daten<span style="color:#666">$</span>preis_qm<span style="color:#666">&gt;=</span><span style="color:#40a070">6</span>  <span style="color:#666">&amp;</span> daten<span style="color:#666">$</span>preis_qm <span style="color:#666">&lt;</span> <span style="color:#40a070">8</span>]  <span style="color:#666">=</span> <span style="color:#40a070">1</span>
</span></span><span style="display:flex;"><span>daten<span style="color:#666">$</span>pricecat[daten<span style="color:#666">$</span>preis_qm<span style="color:#666">&gt;=</span><span style="color:#40a070">8</span>  <span style="color:#666">&amp;</span> daten<span style="color:#666">$</span>preis_qm <span style="color:#666">&lt;</span> <span style="color:#40a070">10</span>] <span style="color:#666">=</span> <span style="color:#40a070">2</span>
</span></span><span style="display:flex;"><span>daten<span style="color:#666">$</span>pricecat[daten<span style="color:#666">$</span>preis_qm<span style="color:#666">&gt;=</span><span style="color:#40a070">10</span> <span style="color:#666">&amp;</span> daten<span style="color:#666">$</span>preis_qm <span style="color:#666">&lt;</span> <span style="color:#40a070">12</span>] <span style="color:#666">=</span> <span style="color:#40a070">3</span>
</span></span><span style="display:flex;"><span>daten<span style="color:#666">$</span>pricecat[daten<span style="color:#666">$</span>preis_qm<span style="color:#666">&gt;=</span><span style="color:#40a070">12</span> <span style="color:#666">&amp;</span> daten<span style="color:#666">$</span>preis_qm <span style="color:#666">&lt;</span> <span style="color:#40a070">15</span>] <span style="color:#666">=</span> <span style="color:#40a070">4</span>
</span></span><span style="display:flex;"><span>daten<span style="color:#666">$</span>pricecat[daten<span style="color:#666">$</span>preis_qm<span style="color:#666">&gt;=</span><span style="color:#40a070">15</span> <span style="color:#666">&amp;</span> daten<span style="color:#666">$</span>preis_qm <span style="color:#666">&lt;</span> <span style="color:#40a070">20</span>] <span style="color:#666">=</span> <span style="color:#40a070">5</span>
</span></span><span style="display:flex;"><span>daten<span style="color:#666">$</span>pricecat[daten<span style="color:#666">$</span>preis_qm<span style="color:#666">&gt;=</span><span style="color:#40a070">20</span>] <span style="color:#666">=</span> <span style="color:#40a070">6</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>daten<span style="color:#666">$</span>pricecat <span style="color:#666">&lt;-</span> <span style="color:#06287e">factor</span>(daten<span style="color:#666">$</span>pricecat, 
</span></span><span style="display:flex;"><span>                         levels<span style="color:#666">=</span><span style="color:#06287e">c</span>(<span style="color:#4070a0">&#34;1&#34;</span>,<span style="color:#4070a0">&#34;2&#34;</span>, <span style="color:#4070a0">&#34;3&#34;</span>,<span style="color:#4070a0">&#34;4&#34;</span>,<span style="color:#4070a0">&#34;5&#34;</span>,<span style="color:#4070a0">&#34;6&#34;</span>), 
</span></span><span style="display:flex;"><span>                         labels<span style="color:#666">=</span><span style="color:#06287e">c</span>(<span style="color:#4070a0">&#34;6 bis 8 Euro pro Quadratmeter&#34;</span>,
</span></span><span style="display:flex;"><span>                                  <span style="color:#4070a0">&#34;8 bis 10 Euro pro Quadratmeter&#34;</span>, 
</span></span><span style="display:flex;"><span>                                  <span style="color:#4070a0">&#34;10 bis 12 Euro pro Quadratmeter&#34;</span>,
</span></span><span style="display:flex;"><span>                                  <span style="color:#4070a0">&#34;12 bis 15 Euro pro Quadratmeter&#34;</span>,
</span></span><span style="display:flex;"><span>                                  <span style="color:#4070a0">&#34;15 bis 20 Euro pro Quadratmeter&#34;</span>,
</span></span><span style="display:flex;"><span>                                  <span style="color:#4070a0">&#34;mehr als 20 Euro pro Quadratmeter&#34;</span>))
</span></span></code></pre></div>



<h2 id="datenanalyse"><strong>Datenanalyse</strong>
  <a href="#datenanalyse"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h2>
<p>Am 18.06.2017 konnte ich für Wiesbaden 400 Inserate extrahieren. Unten ist ein Auszug aus diesem Datensatz dargestellt.</p>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:300px; overflow-x: scroll; width:100%; ">
<table>
<thead>
<tr>
<th style="text-align:left">titel</th>
<th style="text-align:left">lage</th>
<th style="text-align:right">miete</th>
<th style="text-align:right">groesse</th>
<th style="text-align:right">preis_qm</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">SCHÖNE EINLIEGERWOHNUNG in RUHIGER,STADTNAHER LAGE ( WI-SONNENBERG/EIGENHEIM)</td>
<td style="text-align:left">Sonnenberg, Wiesbaden</td>
<td style="text-align:right">900</td>
<td style="text-align:right">57</td>
<td style="text-align:right">15.789474</td>
</tr>
<tr>
<td style="text-align:left">1-Zimmer-Wohnung Wiesbaden, sehr zentrale Lage</td>
<td style="text-align:left">Schiersteiner Str., Südost, Wiesbaden</td>
<td style="text-align:right">700</td>
<td style="text-align:right">22</td>
<td style="text-align:right">31.818182</td>
</tr>
<tr>
<td style="text-align:left">Schöne zwei Zimmer Penthouse- Wohnung in Wiesbaden, Dotzheim</td>
<td style="text-align:left">Greifstraße 7 a, Dotzheim, Wiesbaden</td>
<td style="text-align:right">650</td>
<td style="text-align:right">63</td>
<td style="text-align:right">10.317460</td>
</tr>
<tr>
<td style="text-align:left">Von privat. Helle Zweizimmer-Wohnung in Wiesbaden-Biebrich, Straße der Republik</td>
<td style="text-align:left">Straße der Republik 2, Biebrich, Wiesbaden</td>
<td style="text-align:right">450</td>
<td style="text-align:right">58</td>
<td style="text-align:right">7.758621</td>
</tr>
<tr>
<td style="text-align:left">Möblierte, schöne, geräumige zwei Zimmer Altbau-Wohnung in Wiesbaden, Südost</td>
<td style="text-align:left">Raabestraße 1, Südost, Wiesbaden</td>
<td style="text-align:right">920</td>
<td style="text-align:right">70</td>
<td style="text-align:right">13.142857</td>
</tr>
<tr>
<td style="text-align:left">Rheinufernähe, große 6 Zimmer Wohnung auf zwei Etagen</td>
<td style="text-align:left">Kastel, Wiesbaden</td>
<td style="text-align:right">1500</td>
<td style="text-align:right">190</td>
<td style="text-align:right">7.894737</td>
</tr>
<tr>
<td style="text-align:left">Total renovierte Singlewohnung</td>
<td style="text-align:left">Biebrich, Wiesbaden</td>
<td style="text-align:right">505</td>
<td style="text-align:right">44</td>
<td style="text-align:right">11.477273</td>
</tr>
<tr>
<td style="text-align:left">Exclusive neu renovierte 2,5 Zimmer Wohnung am Kurpark</td>
<td style="text-align:left">Bierstadt, Wiesbaden</td>
<td style="text-align:right">1100</td>
<td style="text-align:right">75</td>
<td style="text-align:right">14.666667</td>
</tr>
<tr>
<td style="text-align:left">Helle und ruhig gelegene 2-Zimmer-Wohnung mit Balkon seitlich Otto-Suhr-Ring</td>
<td style="text-align:left">Steinernstraße, Kostheim, Wiesbaden</td>
<td style="text-align:right">490</td>
<td style="text-align:right">49</td>
<td style="text-align:right">10.000000</td>
</tr>
<tr>
<td style="text-align:left">Helles Einzimmerappartement in Wiesbaden, Mitte</td>
<td style="text-align:left">Frankenstraße, Mitte, Wiesbaden</td>
<td style="text-align:right">350</td>
<td style="text-align:right">34</td>
<td style="text-align:right">10.294118</td>
</tr>
<tr>
<td style="text-align:left">Loreleiring: Eine schicke 3 - ZKBB sucht nette Mieter.</td>
<td style="text-align:left">Rheingauviertel, Wiesbaden</td>
<td style="text-align:right">600</td>
<td style="text-align:right">80</td>
<td style="text-align:right">7.500000</td>
</tr>
<tr>
<td style="text-align:left">720 &lt;U+0080&gt;, 67 m², 3 Zimmer</td>
<td style="text-align:left">Biebrich, Wiesbaden</td>
<td style="text-align:right">720</td>
<td style="text-align:right">67</td>
<td style="text-align:right">10.746269</td>
</tr>
<tr>
<td style="text-align:left">**Wunderbare Wohnung mit Terrasse und EBK**</td>
<td style="text-align:left">Kostheim, Wiesbaden</td>
<td style="text-align:right">660</td>
<td style="text-align:right">73</td>
<td style="text-align:right">9.041096</td>
</tr>
<tr>
<td style="text-align:left">Altbau-Dachgeschosswohnung mit Blick über Wiesbaden</td>
<td style="text-align:left">Adelheidstraße, Mitte, Wiesbaden</td>
<td style="text-align:right">650</td>
<td style="text-align:right">62</td>
<td style="text-align:right">10.483871</td>
</tr>
<tr>
<td style="text-align:left">Helle und geräumige 1-Zimmer Wohnung in Wiesbaden, Kastel</td>
<td style="text-align:left">Römerstr., Kastel, Wiesbaden</td>
<td style="text-align:right">425</td>
<td style="text-align:right">50</td>
<td style="text-align:right">8.500000</td>
</tr>
<tr>
<td style="text-align:left">Traumhafte 2-Zimmer-Wohnungen in Toplage mit Panoramablick - Erstbezug!</td>
<td style="text-align:left">Schönbergstr., Dotzheim, Wiesbaden</td>
<td style="text-align:right">695</td>
<td style="text-align:right">53</td>
<td style="text-align:right">13.113208</td>
</tr>
<tr>
<td style="text-align:left">650 &lt;U+0080&gt;, 56 m², 2 Room(s)</td>
<td style="text-align:left">Nußbaumstraße 1, Südost, Wiesbaden</td>
<td style="text-align:right">650</td>
<td style="text-align:right">56</td>
<td style="text-align:right">11.607143</td>
</tr>
<tr>
<td style="text-align:left">großzügig geschnittene 4 Zimmer Wohnung mit Gartennutzung</td>
<td style="text-align:left">Mitte, Wiesbaden</td>
<td style="text-align:right">1250</td>
<td style="text-align:right">145</td>
<td style="text-align:right">8.620690</td>
</tr>
<tr>
<td style="text-align:left">Mitten im Leben: Helle 4 Zimmer Wohnung im einem gepflegten Altbau fußläufig zum Zentrum</td>
<td style="text-align:left">Mitte, Wiesbaden</td>
<td style="text-align:right">885</td>
<td style="text-align:right">102</td>
<td style="text-align:right">8.676471</td>
</tr>
<tr>
<td style="text-align:left">Nerotal - sanierte Wohnung mit Balkon und Garage</td>
<td style="text-align:left">Nordost, Wiesbaden</td>
<td style="text-align:right">920</td>
<td style="text-align:right">83</td>
<td style="text-align:right">11.084337</td>
</tr>
</tbody>
</table>
</div>
<p>Für Mainz habe ich 332 Inserate erhalten.</p>
<div style="border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:300px; overflow-x: scroll; width:100%; ">
<table>
<thead>
<tr>
<th style="text-align:left">titel</th>
<th style="text-align:left">lage</th>
<th style="text-align:right">miete</th>
<th style="text-align:right">groesse</th>
<th style="text-align:right">preis_qm</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Schnuckeliges 2 Zimmer Haus mit Terrasse</td>
<td style="text-align:left">Bretzenheim, Mainz</td>
<td style="text-align:right">780</td>
<td style="text-align:right">73</td>
<td style="text-align:right">10.684931</td>
</tr>
<tr>
<td style="text-align:left">Schöne zwei Zimmer Wohnung in Mainz, Gonsenheim</td>
<td style="text-align:left">Gonsenheim, Mainz</td>
<td style="text-align:right">640</td>
<td style="text-align:right">64</td>
<td style="text-align:right">10.000000</td>
</tr>
<tr>
<td style="text-align:left">Helle Einraumwohnung mit Sonnenterrassennutzung mitten in der City</td>
<td style="text-align:left">Altstadt, Mainz</td>
<td style="text-align:right">520</td>
<td style="text-align:right">44</td>
<td style="text-align:right">11.818182</td>
</tr>
<tr>
<td style="text-align:left">Ruhige Traum Wohnung mit Luxusausstattung und Loggia im 3.OG Zollhafen.&hellip; Erstbezug</td>
<td style="text-align:left">Neustadt, Mainz</td>
<td style="text-align:right">1750</td>
<td style="text-align:right">119</td>
<td style="text-align:right">14.705882</td>
</tr>
<tr>
<td style="text-align:left">Studenten aufgepasst &quot; Super WG. geeignete 2 Zimmerwohnung mit Gartennutzung</td>
<td style="text-align:left">Gonsenheim, Mainz</td>
<td style="text-align:right">675</td>
<td style="text-align:right">61</td>
<td style="text-align:right">11.065574</td>
</tr>
<tr>
<td style="text-align:left">Schöne zwei Zimmer Wohnung in Mainz, Oberstadt</td>
<td style="text-align:left">Oberstadt, Mainz</td>
<td style="text-align:right">690</td>
<td style="text-align:right">60</td>
<td style="text-align:right">11.500000</td>
</tr>
<tr>
<td style="text-align:left">Helles Studio Apartment, top saniert, möbliert &amp; zentral</td>
<td style="text-align:left">Kaiserstr, Neustadt, Mainz</td>
<td style="text-align:right">650</td>
<td style="text-align:right">40</td>
<td style="text-align:right">16.250000</td>
</tr>
<tr>
<td style="text-align:left">Hochwertige Wohnung mit Blick ins Grüne in Haus mit vier Parteien in Mainz-Bretzenheim</td>
<td style="text-align:left">Bretzenheim, Mainz</td>
<td style="text-align:right">1100</td>
<td style="text-align:right">92</td>
<td style="text-align:right">11.956522</td>
</tr>
<tr>
<td style="text-align:left">Für Stadtliebhaber!Gepflegtes Aparment mit Einbauküche,Gemeinschaftsdachterrasse &amp; Tiefgarage.</td>
<td style="text-align:left">Klarastraße, Altstadt, Mainz</td>
<td style="text-align:right">500</td>
<td style="text-align:right">38</td>
<td style="text-align:right">13.157895</td>
</tr>
<tr>
<td style="text-align:left">Attraktive, helle 2 Zimmer Wohnung mit 2 Balkone und Einbauküche</td>
<td style="text-align:left">Hartenberg/Münchfeld, Mainz</td>
<td style="text-align:right">780</td>
<td style="text-align:right">83</td>
<td style="text-align:right">9.397590</td>
</tr>
<tr>
<td style="text-align:left">Schön möbliertes 1-Zi. Appartement in Mainz, Hartenberg/Münchfeld</td>
<td style="text-align:left">Richard Schirrmann Str., Hartenberg/Münchfeld, Mainz</td>
<td style="text-align:right">350</td>
<td style="text-align:right">22</td>
<td style="text-align:right">15.909091</td>
</tr>
<tr>
<td style="text-align:left">In einem wunderschönen Neubauhaus, schöne 2KB, Einbauküche, Terrasse, Mainz-Neustadt</td>
<td style="text-align:left">Zollhafen, Neustadt, Mainz</td>
<td style="text-align:right">950</td>
<td style="text-align:right">70</td>
<td style="text-align:right">13.571429</td>
</tr>
<tr>
<td style="text-align:left">Wohnen im Grünen, stadtnah!</td>
<td style="text-align:left">Katzenberg, Finthen, Mainz</td>
<td style="text-align:right">500</td>
<td style="text-align:right">61</td>
<td style="text-align:right">8.196721</td>
</tr>
<tr>
<td style="text-align:left">1.390 &lt;U+0080&gt;, 92 m², 3 Zimmer</td>
<td style="text-align:left">An der Karlsschanze, Oberstadt, Mainz</td>
<td style="text-align:right">1390</td>
<td style="text-align:right">92</td>
<td style="text-align:right">15.108696</td>
</tr>
<tr>
<td style="text-align:left">Helle sonnige Dachgeschoßwohnung im Zweifamilienhaus in Mainz-Laubenheim</td>
<td style="text-align:left">Enggäßchen, Laubenheim, Mainz</td>
<td style="text-align:right">690</td>
<td style="text-align:right">65</td>
<td style="text-align:right">10.615385</td>
</tr>
<tr>
<td style="text-align:left">Schöne drei Zimmer Wohnung in Mainz, Altstadt</td>
<td style="text-align:left">Walpodenstr., Altstadt, Mainz</td>
<td style="text-align:right">690</td>
<td style="text-align:right">60</td>
<td style="text-align:right">11.500000</td>
</tr>
<tr>
<td style="text-align:left">schöne helle 7-Zimme-Altbauwohnung, geeignet für Arbeiten u. Wohnen</td>
<td style="text-align:left">Kaiserstraße, Altstadt, Mainz</td>
<td style="text-align:right">1800</td>
<td style="text-align:right">180</td>
<td style="text-align:right">10.000000</td>
</tr>
<tr>
<td style="text-align:left">Mainz-Mombach, sehr schönes helles Souterrain-Appartement</td>
<td style="text-align:left">An der Brunnenstube 15/6, Mombach, Mainz</td>
<td style="text-align:right">376</td>
<td style="text-align:right">28</td>
<td style="text-align:right">13.428571</td>
</tr>
<tr>
<td style="text-align:left">1-Zimmer Appartment - Nähe Uniklinik</td>
<td style="text-align:left">Untere Zahlbacher Straße, Oberstadt, Mainz</td>
<td style="text-align:right">350</td>
<td style="text-align:right">30</td>
<td style="text-align:right">11.666667</td>
</tr>
<tr>
<td style="text-align:left">Schöne, geräumige drei Zimmer Wohnung in Mainz, Ebersheim</td>
<td style="text-align:left">Ebersheim, Mainz</td>
<td style="text-align:right">840</td>
<td style="text-align:right">98</td>
<td style="text-align:right">8.571429</td>
</tr>
</tbody>
</table>
</div>
<p>Mit dem R Paket <code>ggmap</code> werde ich nun die Mietpreise visualisieren. Zunächst mussten die Adressen der Inserate mit der Geocoding API von Google georeferenziert werden. Zum Teil enthalten die Inserate nur ungenaue Adressangaben, wie den Stadtteil mit der zugehörigen Postleitzahl. An allen Punkten, die die API lediglich mit der Postleitzahl assoziiert, entsteht so eine zu hohe Konzentration von Angeboten.</p>
<p>Für die grafische Darstellung verwende ich die Funktion <code>stat_bin2d()</code> aus dem R-Paket <code>ggplot2</code>, welche Beobachtungen innerhalb von Rechtecken zusammenfasst und eine Hitzekarte erstellt. Eine Konzentration von Inseraten mit niedriger bzw. hoher Kaltmiete wird durch die Farbe Gelb bzw. Rot dargestellt.</p>
<p>Unten befindet sich eine Karte mit den Kaltmieten der Angebote innerhalb Wiesbadens. Besonders im Norden von Wiesbaden (Nordost, Sonnenberg) sowie im Süden (Künstlerviertel, Südost) ist Wohnraum relativ teuer. In zentraler Lage (Mitte, Westend) sind die Wohnungen hingegen durchschnittlich etwas günstiger.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic"># Karte von Wiesbaden</span>
</span></span><span style="display:flex;"><span>karte_wi <span style="color:#666">=</span> <span style="color:#06287e">qmap</span>(<span style="color:#4070a0">&#34;Wiesbaden&#34;</span>, zoom <span style="color:#666">=</span> <span style="color:#40a070">12</span>, color <span style="color:#666">=</span> <span style="color:#4070a0">&#34;bw&#34;</span>,
</span></span><span style="display:flex;"><span>                source <span style="color:#666">=</span> <span style="color:#4070a0">&#34;stadia&#34;</span>, maptype <span style="color:#666">=</span> <span style="color:#4070a0">&#34;stamen_toner_background&#34;</span>,
</span></span><span style="display:flex;"><span>                darken <span style="color:#666">=</span> <span style="color:#06287e">c</span>(<span style="color:#40a070">.3</span>, <span style="color:#4070a0">&#34;#BBBBBB&#34;</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic"># Heatmap</span>
</span></span><span style="display:flex;"><span>karte_wi <span style="color:#666">+</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#06287e">stat_bin2d</span>(
</span></span><span style="display:flex;"><span>    <span style="color:#06287e">aes</span>(x <span style="color:#666">=</span> long, y <span style="color:#666">=</span> lati, fill <span style="color:#666">=</span> <span style="color:#06287e">as.factor</span>(pricecat)),
</span></span><span style="display:flex;"><span>    size <span style="color:#666">=</span> <span style="color:#40a070">1</span>, bins <span style="color:#666">=</span> <span style="color:#40a070">20</span>, alpha <span style="color:#666">=</span> <span style="color:#40a070">0.4</span>, data <span style="color:#666">=</span> daten_wi
</span></span><span style="display:flex;"><span>    ) <span style="color:#666">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#06287e">scale_fill_brewer</span>(type <span style="color:#666">=</span> <span style="color:#4070a0">&#34;seq&#34;</span>, palette <span style="color:#666">=</span> <span style="color:#4070a0">&#34;YlOrRd&#34;</span>) <span style="color:#666">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#06287e">labs</span>(caption <span style="color:#666">=</span> <span style="color:#06287e">paste0</span>(
</span></span><span style="display:flex;"><span>    <span style="color:#06287e">dim</span>(daten_wi)[1],
</span></span><span style="display:flex;"><span>    <span style="color:#4070a0">&#34; extrahierte Inserate; Quelle: immobilienscout24.de&#34;</span>)
</span></span><span style="display:flex;"><span>    ) <span style="color:#666">+</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#06287e">guides</span>(fill <span style="color:#666">=</span> <span style="color:#06287e">guide_legend</span>(title<span style="color:#666">=</span><span style="color:#4070a0">&#34;Kaltmiete&#34;</span>))
</span></span></code></pre></div><img src="index.markdown_strict_files/figure-markdown_strict/karte1_wi-1.png" data-fig-align="center" width="768" />
<hr>
<p>Es folgt die gleiche Darstellung für Mainz. Hier ist das Mietniveau in der Innenstadt (Neu- und Altstadt) besonders hoch. In den Randbezirken ist es dagegen im Durchschnit etwas günstiger.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic"># Karte von Mainz</span>
</span></span><span style="display:flex;"><span>karte_mz <span style="color:#666">=</span> <span style="color:#06287e">qmap</span>(<span style="color:#4070a0">&#34;Mainz&#34;</span>, zoom <span style="color:#666">=</span> <span style="color:#40a070">12</span>, color <span style="color:#666">=</span> <span style="color:#4070a0">&#34;bw&#34;</span>,
</span></span><span style="display:flex;"><span>                source <span style="color:#666">=</span> <span style="color:#4070a0">&#34;stadia&#34;</span>, maptype <span style="color:#666">=</span> <span style="color:#4070a0">&#34;stamen_toner_background&#34;</span>,
</span></span><span style="display:flex;"><span>                darken <span style="color:#666">=</span> <span style="color:#06287e">c</span>(<span style="color:#40a070">.3</span>, <span style="color:#4070a0">&#34;#BBBBBB&#34;</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#60a0b0;font-style:italic"># Heatmap</span>
</span></span><span style="display:flex;"><span>karte_mz <span style="color:#666">+</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#06287e">stat_bin2d</span>(
</span></span><span style="display:flex;"><span>    <span style="color:#06287e">aes</span>(x <span style="color:#666">=</span> long, y <span style="color:#666">=</span> lati, fill <span style="color:#666">=</span> <span style="color:#06287e">as.factor</span>(pricecat)),
</span></span><span style="display:flex;"><span>    size <span style="color:#666">=</span> <span style="color:#40a070">1</span>, bins <span style="color:#666">=</span> <span style="color:#40a070">20</span>, alpha <span style="color:#666">=</span> <span style="color:#40a070">0.4</span>, data <span style="color:#666">=</span> daten_mz) <span style="color:#666">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#06287e">scale_fill_brewer</span>(type <span style="color:#666">=</span> <span style="color:#4070a0">&#34;seq&#34;</span>, palette <span style="color:#666">=</span> <span style="color:#4070a0">&#34;YlOrRd&#34;</span>) <span style="color:#666">+</span>
</span></span><span style="display:flex;"><span>  <span style="color:#06287e">labs</span>(caption <span style="color:#666">=</span> <span style="color:#06287e">paste0</span>(
</span></span><span style="display:flex;"><span>    <span style="color:#06287e">dim</span>(daten_mz)[1],
</span></span><span style="display:flex;"><span>    <span style="color:#4070a0">&#34; extrahierte Inserate; Quelle: immobilienscout24.de&#34;</span>)
</span></span><span style="display:flex;"><span>    ) <span style="color:#666">+</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#06287e">guides</span>(fill <span style="color:#666">=</span> <span style="color:#06287e">guide_legend</span>(title<span style="color:#666">=</span><span style="color:#4070a0">&#34;Kaltmiete&#34;</span>))
</span></span></code></pre></div><img src="index.markdown_strict_files/figure-markdown_strict/karte1_mz-1.png" data-fig-align="center" width="768" />

        
        <details closed class="f6 fw7 input-reset">
  <dl class="f6 lh-copy">
    <dt class="fw7">Posted on:</dt>
    <dd class="fw5 ml0">June 19, 2017</dd>
  </dl>
  <dl class="f6 lh-copy">
    <dt class="fw7">Length:</dt>
    <dd class="fw5 ml0">8 minute read, 1639 words</dd>
  </dl>
  
  <dl class="f6 lh-copy">
    <dt class="fw7">Categories:</dt>
    <dd class="fw5 ml0"> <a href="https://philippleppert.eu/categories/r">R</a>  <a href="https://philippleppert.eu/categories/kartierung">Kartierung</a>  <a href="https://philippleppert.eu/categories/webscraping">Webscraping</a> </dd>
  </dl>
  
  
  
  <dl class="f6 lh-copy">
    <dt class="fw7">See Also:</dt>
    
  </dl>
</details>

      </section>
      <footer class="post-footer">
        <div class="post-pagination dt w-100 mt4 mb2">
  
  
    <a class="prev dtc pr2 tl v-top fw6"
    href="https://philippleppert.eu/blog/datenanalyse-etfs/">&larr; ETFs im Datencheck</a>
  
  
  
</div>

      </footer>
    </article>
    
      
<div class="post-comments pa0 pa4-l mt4">

</div>


    
  </section>
</main>
<footer class="site-footer pv4 bt b--transparent ph5" role="contentinfo">
  <nav class="db dt-l w-100">
    <p class="site-copyright f7 db dtc-l v-mid w-100 w-33-l tc tl-l pv2 pv0-l mv0 lh-copy">
      &copy; 2023 Philipp Leppert
      <span class="middot-divider"></span>
      Made with <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title"><a xmlns:dct="http://purl.org/dc/terms/" href="https://github.com/hugo-apero/" rel="dct:source">Hugo Apéro</a></span>.
      <br />
      
Based on <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title"><a xmlns:dct="http://purl.org/dc/terms/" href="https://github.com/formspree/blogophonic-hugo" rel="dct:source">Blogophonic</a></span> by <a xmlns:cc="http://creativecommons.org/ns#" href="https://formspree.io" property="cc:attributionName" rel="cc:attributionURL">Formspree</a>.
    </p>
    
    <div class="site-links f6 db dtc-l v-mid w-100 w-67-l tc tr-l pv2 pv0-l mv0">
      
      <a class="dib pv1 ph2 link" href="/legal-notice/" title="Legal notice">Legal notice</a>
      
    </div>
  </nav>
  
    <script>

    var i, text, code, codes = document.getElementsByTagName('code');
    for (let i = 0; i < codes.length;) {
      code = codes[i];
      if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
        text = code.textContent;
        if (/^\$[^$]/.test(text) && /[^$]\$$/.test(text)) {
          text = text.replace(/^\$/, '\\(').replace(/\$$/, '\\)');
          code.textContent = text;
        }
        if (/^\\\((.|\s)+\\\)$/.test(text) ||
            /^\\\[(.|\s)+\\\]$/.test(text) ||
            /^\$(.|\s)+\$$/.test(text) ||
            /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
          code.outerHTML = code.innerHTML;  
          continue;
        }
      }
      i++;
    }
</script>

  
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" integrity="sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js" integrity="sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>



    
  
  
</footer>

      </div>
    </body>
</html>
